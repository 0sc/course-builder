{% extends 'base.html' %}

{% block subtitle %}
  Lesson
{% endblock subtitle %}

{% block top_content %}
{% endblock %}

{% block main_content %}

<div class="gcb-main">
  <ul class="gcb-breadcrumb">
    <li><a href="course">{% trans %} Course {% endtrans %}</a></li>
    <li><a href="unit?unit={{ units.unit_id }}">
      {% trans %} Unit {% endtrans %} {{ units.unit_id }}</a></li>
    <li>{% trans %} Lesson {% endtrans %} {{ lesson_id }}</li>
  </ul>
  <div>
    <h1 class="class_header">
      {{ gettext('Unit %(id)s - %(title)s', id=units.unit_id, title=units.title) }}
    </h1>
  </div>

  <div class="gcb-nav" id="gcb-nav-y">
    <ul>
      {{course_info.unit.after_leftnav_begins}}
      {% for lesson in lessons %}
      <li
        {% if lesson.lesson_id == lesson_id %}
        class="active"> {{ unit_id }}.{{ lesson.lesson_id }}<br>{{ lesson.title }}
        {% else %}
        ><a href="unit?unit={{ unit_id }}&lesson={{ lesson.lesson_id }}" >{{ unit_id }}.{{ lesson.lesson_id }} {{ lesson.title }}</a>
        {% endif %}

        {% if lesson.activity %}
          <ul>
            <li>
              {% if is_progress_recorded %}
                {% if progress[lesson.lesson_id] == 2 %}
                  <img src="assets/lib/completed.png"
                       alt="{% trans %} Completed {% endtrans %}"
                       title="{% trans %} Completed {% endtrans %}"
                       class="progress"
                       id="progress-completed-{{lesson.lesson_id}}">
                {% elif progress[lesson.lesson_id] == 1 %}
                  <img src="assets/lib/in_progress.png"
                       alt="{% trans %} In progress {% endtrans %}"
                       title="{% trans %} In progress {% endtrans %}"
                       class="progress"
                       id="progress-inprogress-{{lesson.lesson_id}}">
                {% else %}
                  <img src="assets/lib/not_started.png"
                       alt="{% trans %} Not yet started {% endtrans %}"
                       title="{% trans %} Not yet started {% endtrans %}"
                       class="progress"
                       id="progress-notstarted-{{lesson.lesson_id}}">
                {% endif %}
              {% else %}
                <span class="progress-empty"></span>
              {% endif %}

              <a href="activity?unit={{ unit_id }}&lesson={{ lesson.lesson_id }}">
                {% trans %} Activity {% endtrans %}
              </a>
            </li>
          </ul>
        {% endif %}
      </li>
      {% endfor %}
      {{course_info.unit.before_leftnav_ends}}
    </ul>
  </div>

  <div class="gcb-article tab-content" role="main">
    {{course_info.unit.after_content_begins}}
    {% for lesson in lessons %}
      {% if lesson.lesson_id == lesson_id %}

        <div style="padding-bottom: 20px;">
          <div class="gcb-aside gcb-button-box">
            <div class="gcb-cols">
              <div class="gcb-col-7">
                <h1 class="lesson_title">
                  {{ lesson.title }}
                </h1>
                {% if lesson.objectives %}
                  <div class="lesson_objective">
                    {{ lesson.objectives }}
                  </div>
                {% endif %}
                </div>
              <div class="gcb-col-3">
                <p style="float:right; margin-top: 0px;">
                  <a role="button" class="gcb-button gcb-button-primary" href="{{ lesson.notes }}" target="_blank">
                    {% trans %} Text Version {% endtrans %}
                  </a>
                </p>
              </div>
            </div><!-- /gcb-cols -->
            {% if lesson.video %}
              <p class="video-container">
                <iframe class="youtube-player" title="{% trans %} YouTube Video Player {% endtrans %}" type="text/html" width="650" height="400"
                 src="https://www.youtube.com/embed/{{ lesson.video }}?feature=player_embedded&rel=0" frameborder="0" allowfullscreen></iframe>
              </p>
            {% endif %}
          </div><!-- /gcb-aside -->

          <div class="gcb-button-box">
            <div class="prev-button" style="float:left; margin-top: 0px; margin-left: 40px;">
              {% if back_button_url %}
                <a href="{{ back_button_url }}">
                  {% trans %} Previous Page {% endtrans %}
                </a>
              {% endif %}
            </div>
            <div class="next-button" style="float:right; margin-top: 0px; margin-right: 40px;">
              {% if next_button_url %}
                <a href="{{ next_button_url }}">
                  {% trans %} Next Page {% endtrans %}
                </a>
              {% else %}
                <a href="course">
                  {% trans %} End {% endtrans %}
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
    {{course_info.unit.before_content_ends}}
  </div>
</div>

{% endblock %}
