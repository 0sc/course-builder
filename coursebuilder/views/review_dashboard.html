{% extends 'base.html' %}

{% block subtitle %}
  {% trans %} Assessment {% endtrans %}
{% endblock subtitle %}

{% block top_content %}
{% endblock %}

{% block main_content %}

<div class="gcb-main">
  <div class="gcb-article">
    <script>
      {% if record_events %}
        gcbCanPostEvents = true;
        eventXsrfToken = '{{ event_xsrf_token }}';
      {% endif %}
    </script>

    <h2>
      {{ gettext('Submissions for you to review') }}
    </h2>

    <p>
      <em>
        {{ gettext('All reviews are due by %(review_due_date)s.',
                   review_due_date=review_due_date) }}

        {{ ngettext(
            'In order to earn credit for this assessment, you must complete at
             least %(review_min_count)d review by then.',
            'In order to earn credit for this assessment, you must complete at
             least %(review_min_count)d reviews by then.',
            review_min_count) % {'review_min_count': review_min_count}
        }}
      </em>
    </p>

    <ol>
      {% for review in reviews %}
        <li>
          <a href="review?unit={{unit_id}}&amp;review_index={{loop.index0}}">{{ gettext('Submission %(index)s', index=loop.index) }}</a>
          {% if review.review %}
            {% if review.is_draft %}
              ({{ gettext('Draft') }})
            {% else %}
              ({{ gettext('Completed') }})
            {% endif %}
          {% endif %}
        </li>
      {% endfor %}
    </ol>

    <form action="reviewdashboard?unit={{unit_id}}" method="post">
      <input type="hidden" name="xsrf_token"
             value="{{ review_dashboard_xsrf_token | escape }}">
      <input type="hidden" name="unit_id" value="{{ unit_id }}">
      <button class="gcb-button" type="submit"
        {% if not can_request_new_review %}
          disabled="true"
        {% endif %}
      >
        {{ gettext('Review another submission') }}
      </button>
    </form>

    {% if no_submissions_available is defined and no_submissions_available %}
      <p>
        {{ gettext('Sorry, there are no new submissions available for you to review at this time.') }}
      </p>
    {% endif %}

  </div>
</div>

{% endblock %}
